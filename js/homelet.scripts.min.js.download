function sessionStorageSet(e,t){try{sessionStorage.setItem(e,t)}catch(a){}}function sessionStorageGet(e){try{return sessionStorage.getItem(e)}catch(t){}}function getAriaLogDiv(){var e=$("#aria-log");return 0===e.length&&(e=$('<div id="aria-log" role="log" aria-atomic="true" class="hiddenInLink sr-only" aria-relevant="additions" aria-live="polite"></div>'),$("body").append(e)),e}function tabpanel(e,t,a,r){this.panel_id=e,this.accordian=r,this.$panel=$("#"+e),this.keys={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40},this.init_executed=!1,this.$tabs=this.$panel.find(t),this.$panels=this.$panel.find(a),this.bindHandlers(),this.init()}function HotelsHomeletLoader(){var e=$("#hotel"),t=$("#mainHotel");this.load=function(a,r){void 0!==t&&t.length>0?"function"==typeof a&&a():$.ajax({type:"GET",url:r,success:function(t){e.html(t),a()}})}}function CarsHomeletLoader(){var e=$("#car"),t=$("#mainCar");this.load=function(a,r){void 0!==t&&t.length>0?"function"==typeof a&&a():$.ajax({type:"GET",url:r,success:function(t){e.html(t),a()}})}}function VacationsHomeletLoader(){var e=$("#vacation"),t=$("#mainVacation");this.load=function(a,r){void 0!==t&&t.length>0?"function"==typeof a&&a():$.ajax({type:"GET",url:r,success:function(t){e.html(t),a()}})}}function ShowInterstitial(){if("DISABLE"!==homepage.cookieStore.getCookie("!INTERSTITIAL").toUpperCase()){var e=$(".interstitial").eq(0);e.remove(),$("body").append(e),e.show(0),$(".interstitial p span:visible").focus()}}function HideInterstitial(){var e=$(".interstitial").eq(0);e.hide()}var serviceEndpoints=as&&"prod"!==as.Environment?{kineticsWebCheckInURL:"https://selfservice.test.alaskaair.com/checkinweb/default.aspx"}:{kineticsWebCheckInURL:"https://webselfservice.alaskaair.com/checkinweb/default.aspx"};Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var a=new Array(t),r=arguments[1],i=0;i<t;i++)i in this&&(a[i]=e.call(r,this[i],i,this));return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var a=t||0,r=this.length;a<r;a++)if(this[a]===e)return a;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var homepage=window.homepage||{};homepage.cookieStore={getCookie:function(e){for(var t=e+"=",a=window.document.cookie.split(";"),r=0,i=a.length;r<i;r++){for(var n=a[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return""},deleteCookie:function(e,t,a){var r=new Date("January 1, 1970");document.cookie=e+"="+(a?"; path="+a:"")+(t?"; domain="+t:"")+"; expires="+r.toGMTString()}};var homepage=window.homepage||{};homepage.sessionStorageManager={set:function(e,t){sessionStorageSet(e,t)},get:function(e){return sessionStorageGet(e)}};var KeyCodes={DownArrow:40,UpArrow:38,Enter:13,Tab:9,End:35,Home:36,Shift:16},GetRandomId=function(){var e=new Date,t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return t+"_"+a+"_"+r+Math.floor(1111*Math.random())};jQuery.fn.addAsDropdown=function(e){return makeDropdown($(this),e)};var makeDropdown=function(e,t){function a(e){var a=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(a!=KeyCodes.Enter||0!=$("li",$(f)).length){a>=96&&a<=105&&(a-=48);var n=String.fromCharCode(a),o=!1;if(!d.AcceptCharInput){for(D=y+1;D<d.List.length;D++)if(d.List[D].substring(0,1).toLowerCase()===n.toLowerCase()){y=D,o=!0;break}if(!o)for(D=0;D<=y;D++)if(d.List[D].substring(0,1).toLowerCase()===n.toLowerCase()){y=D,o=!0;break}}var v=!1;o||$("li",f).each(function(e){($(this).hasClass("selected_li")||s.val()===$(this).attr("title"))&&(y=e,v=!0)});var m=$(f).length>0&&"none"!==$(f).css("display").toLowerCase();if(m){var g="";$("li",$(f)).each(function(){$(this).hasClass("selected_li")&&(g=$(this).attr("title"))})}var C=d.List.length,b=$("li",$(f)).eq(y).attr("citycode");if(o||a==KeyCodes.DownArrow||a==KeyCodes.UpArrow){if(!o&&m)switch(a){case KeyCodes.DownArrow:y+1<d.List.length&&y++,p(t.$ariaLog,y+1+" of "+d.List.length,!0);break;case KeyCodes.UpArrow:y>=0&&(y--,y>=0&&p(t.$ariaLog,y+1+" of "+d.List.length,!0))}y>C?y=0:y<-1?y=C-1:y!=-1&&y!=C||(y=-1),r(),$("li",$(f)).css({"background-color":"white"}),$("li",$(f)).css({color:"#696969"}),$("li",$(f)).removeClass("selected_li"),y>-1?($("li",$(f)).eq(y).css({"background-color":"#696969"}),$("li",$(f)).eq(y).css({color:"white"}),$("li",$(f)).eq(y).addClass("selected_li"),u(d.List[y],b)):""!=s.param.searchText&&u(s.param.searchText,b),setTimeout(function(){$(s)[0].setSelectionRange(0,999999)},0),h=!1}else if(a>=48&&a<=48+d.List.length)y=a-49,u(d.List[y],b),i();else if(a==KeyCodes.Enter||a==KeyCodes.Tab){if(m){var g="",w="";s.param.defaultSelect>=0&&s.param.defaultSelect<=C?(g=$("li",$(f)).eq(s.param.defaultSelect).attr("title"),w=$("li",$(f)).eq(s.param.defaultSelect).attr("cityCode")):$("li",$(f)).length>=1&&(g=$("li",$(f)).eq(0).attr("title"),w=$("li",$(f)).eq(0).attr("citycode")),$("li",$(f)).each(function(e){$(this).hasClass("selected_li")&&(g=$(this).attr("title"),w=$(this).attr("cityCode"),s.removeClass(l))}),""!=g&&(u(g,w),s.removeClass(l),"checkInDestination"==$(s).attr("id")&&$("#"+c).val(w)),i()}h=!0}else h=d.AcceptCharInput;return h}}function r(){$(f).show()}function i(){$(document).unbind("click",n),makeDropdown.hide()}function n(){$(document).unbind("click",n);var e=$("li",$(f)).eq(0);if(e.is(":visible")){var t=e.attr("citycode"),a=e.attr("title");u(a,t)}makeDropdown.hide()}function o(e,t){var a=e.offset().top+e.height(),r=isNaN(parseInt(e.css("border-top"),10))?0:parseInt(e.css("border-top"),10),i=isNaN(parseInt(e.css("border-bottom"),10))?0:parseInt(e.css("border-bottom"),10),n=isNaN(parseInt(e.css("margin-top"),10))?0:parseInt(e.css("margin-top"),10),o=isNaN(parseInt(e.css("padding-top"),10))?0:parseInt(e.css("padding-top"),10);a+=r+i+n+o+3;var s=e.offset().left;$(t).css({top:a}),$(t).css({left:s})}var s=$(e),l="input-validation-error";s.attr("aria-invalid",!1);var d={Height:t.height,DivId:t.divId,SearchText:t.searchText,FormatText:t.formatText,List:t.list,ListAlt:[],AcceptCharInput:null!=t&&null!=t.acceptCharInput&&t.acceptCharInput,IdSuffix:GetRandomId(),UseBackgroundImage:!0,DefaultHtml:null!=t&&null!=t.defaultHtml?t.defaultHtml:"",CityCodeID:t.citycodeid},c=d.CityCodeID;$("#"+c).val("");var h=!1;d.DivId=null==d.DivId?"divAsDD"+d.IdSuffix:d.DivId,t.divId=d.DivId;var u=function(e,t){s.val(e),s.attr("data-city-code",t),$("#"+c).length&&$("#"+c).val(t)},p=function(e,t,a){var r=function(e,t,a){var r;return function(){var i=this,n=arguments,o=function(){r=null,a||e.apply(i,n)},s=a&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,n)}};r(function(){e.text()!==t&&e.text(t)},500,a)()},f=$("#"+d.DivId);if(makeDropdown.divAsDD=f,0===f.length){var v="<div id='"+d.DivId+"' class='AsDD'></div>";if($(document.activeElement).attr("name")!==e.attr("name"))return!1;i(),$("body").append(v),f=$("#"+d.DivId);var m=19;$(f).css({"z-index":9999,"text-align":"left",display:"none",position:"absolute","background-color":"white",border:"solid 1px #BBB",left:0,top:m}),null!=d.Height&&$(f).css({height:d.Height,overflow:"auto"}),$(f).scroll(function(){})}else $(f).empty();if(v="",!(null!=d.List&&d.List.length>0)){setTimeout(function(){s.attr("aria-invalid",!0)},0),p(t.$ariaLog,$(d.DefaultHtml).text(),!1),v=d.DefaultHtml,$(f).css({background:"#dedede"}),s.addClass(l),f.append(v).show(),o(s,f),$(f).css({top:$(f).offset().top+4});var g="keydown";$(s).unbind(g);var y=-1;return $(s).bind(g,function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;t!=KeyCodes.Enter&&t!=KeyCodes.Tab||i()}),this}var C="ul"+d.IdSuffix,b=0,w=-1,k=!1;f.append("<ul id='"+C+"'></ul>");for(var D=0;D<d.List.length;D++){var S="li"+d.IdSuffix+"-"+b,x="li"+d.IdSuffix+"-",T=new RegExp(d.SearchText,"gi"),A=new RegExp(d.SearchText.toUpperCase()+"-","g"),I=new RegExp("("+d.SearchText+")","gi"),E=d.FormatText?d.List[D].N.replace(I,"<b>$1</b>"):d.List[D].N,L=d.List[D].S.length;if(d.List[D].I?itemStyle="background-color: #fff;color: #696969;padding-left: 15px;":itemStyle="background-color: #fff;color: #696969;",d.ListAlt.push(d.List[D].N),(w<0&&T.test(d.List[D].N)||!k&&3===d.SearchText.length&&A.test(d.List[D].N))&&(!k&&3===d.SearchText.length&&A.test(d.List[D].N)&&(k=!0),w=b),L>0){$("#"+C).append("<li id='"+S+"' style='border-top:1px solid #BBB; padding:0 3px;white-space:nowrap;"+itemStyle+"' title=\""+d.List[D].N+'">'+E+"</li>");for(var O=0;O<L;O++)x+=++b,itemStyle="background-color: #fff;color: #696969;",(w<0&&T.test(d.List[D].S[O].N)||!k&&3===d.SearchText.length&&A.test(d.List[D].S[O].N))&&(!k&&3===d.SearchText.length&&A.test(d.List[D].S[O].N)&&(k=!0),w=b),E=d.FormatText?d.List[D].S[O].N.replace(I,"<b>$1</b>"):d.List[D].S[O].N,d.ListAlt.push(d.List[D].S[O].N),O===L-1?$("#"+C).append("<li id='"+x+"' style='border-bottom:1px solid #BBB;padding:0 3px 0 25px;white-space:nowrap;"+itemStyle+"' title='"+d.List[D].S[O].N+"' citycode='"+d.List[D].S[O].C+"'>"+E+"</li>"):$("#"+C).append("<li id='"+x+"' style='padding:0 3px 0 25px;white-space:nowrap;"+itemStyle+"' title='"+d.List[D].S[O].N+"' citycode='"+d.List[D].S[O].C+"'>"+E+"</li>")}else $("#"+C).append("<li id='"+S+"' style='padding:0 3px;white-space:nowrap;"+itemStyle+"' title='"+d.List[D].N+"' citycode='"+d.List[D].C+"'>"+E+"</li>");b++}var V=d.List.slice();d.List=d.ListAlt.slice(),d.ListAlt=V,d.List.length>0&&($("#"+C+" li").eq(w>-1?w:0).addClass("selected_li").css({"background-color":"#696969",color:"#fff"}),p(t.$ariaLog,$("#"+C+" li").eq(w>-1?w:0).text()+" One of "+d.List.length,!0),t.defaultSelect=w),s.removeClass(l),$(f).css({background:"#ffffff"}),$("ul",$(f)).css({padding:"0px",color:"#696969",margin:"0px",cursor:"pointer","padding-left":"0px","margin-left":"0px","list-style-type":"none"}),$("li",$(f)).mouseover(function(){$("li",$(f)).css({"background-color":"#ffffff",color:"#696969"}),$(this).css({"background-color":"#696969",color:"white"})}),$("li",$(f)).click(function(){i();var e=$(this).attr("title"),t=$(this).attr("citycode");u(e,t),s.removeClass(l)}),$(f).keypress(function(){$(".selected_li",this).click()});var g="keydown";$(s).unbind(g);var y=-1;return $(s).bind(g,function(e){a(e)}),"true"!=$(s).attr("blurbound")&&($(s).bind("blur",function(e){"none"!=$(f).css("display")&&1==$("li",$(f)).length&&u($("li",$(f)).eq(0).attr("title"),$("li",$(f)).eq(0).attr("citycode"))}),$(s).attr("blurbound","true")),$(s).attr("autocomplete","off"),s.param=t,o(s,f),$(document.activeElement).attr("id")===s.attr("id")?r():i(),$(document).bind("click",n),this.unbindDropdown=function(){$(document).unbind("click",n)},this};makeDropdown.hide=function(){$(".AsDD").hide()};var isImageRes=!1,as=as||{};as.dropDown=null;var getCities=function(e,t,a,r,i,n){n=n||$("#"+this[0].id+"-log");var o=t,s=$(this);if(e===$(this).val()){var l="www.alaskaair.com";try{null!=asglobal&&null!=asglobal.domainUrl&&""!=asglobal.domainUrl?l=asglobal.domainUrl:null!=parent.asglobal&&null!=parent.asglobal.domainUrl&&""!=parent.asglobal.domainUrl&&(l=asglobal.domainUrl)}catch(d){}$.ajax({type:"POST",url:"//"+l+"/HomeWidget/GetCities",dataType:"json",data:{prefixText:e,contextKey:a},complete:function(l){var d=$.parseJSON(l.responseText);if(e===$(s).val()){var c="<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div>";null!=a&&"partner"===a.toLowerCase()?i&&d.length>0?(c="<div style='padding:8px;'>Select the Use Miles check box to search award destinations.</div>",d=[]):c+="</div>":c+="<div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",r&&0===d.length&&null!=a&&"partner"!==a.toLowerCase()?(a="partner","undefined"==typeof jQuery.fn.getCities&&(jQuery.fn.getCities=getCities),s.getCities(e,t,a,r,!0,n)):(as.dropDown&&as.dropDown.unbindDropdown(),as.dropDown=makeDropdown($(s),{formatText:!0,searchText:e,list:d,divId:o,acceptCharInput:!0,defaultHtml:c,selectTextOnClick:!0,$ariaLog:n,citycodeid:"checkinorigin"}),d.length>0&&$(document.activeElement).attr("id")===s.attr("id")&&$("#"+o).show())}}})}return this},getBEXLocations=function(e,t,a,r){a=a||$("#"+this[0].id+"-log");var i=t,n=$(this);return e===$(this).val()&&$.ajax({type:"GET",url:"https://suggest.expedia.com/api/v4/typeahead/"+e+"?&client="+r.clientType+"&siteid="+r.siteId+"&guid="+r.guid+"&lob="+r.lobType+"&locale="+r.localeType+"&regiontype="+r.regiontype+"&dest="+r.dest+"&maxresults="+r.maxResults+"&features="+r.featuresType+"&format="+r.formatType,dataType:r.formatType,success:function(t){var o=t.sr;if("undefined"==typeof o)return!1;var s=o.map(function(e){return{C:e.gaiaId,N:e.regionNames.fullName,I:"true"==e.hierarchyInfo.isChild,S:[]}});if(e===$(n).val()){var l="<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City Name</div><div>&bull;&nbsp;&nbsp;Airport Name or Code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>";makeDropdown($(n),{formatText:!0,searchText:e,list:s,divId:i,acceptCharInput:!0,defaultHtml:l,selectTextOnClick:!0,$ariaLog:a,citycodeid:r.cityCodeId}),o.length>0&&$(document.activeElement).attr("id")===n.attr("id")&&$("#"+i).show()}}}),this};jQuery.fn.getCities=getCities,jQuery.fn.getBEXLocations=getBEXLocations;var BEX_SMARTFILL_OPTIONS={clientType:{HOT:"Hotels.Search",CAR:"Cars.Search",PKG:"Packages.Search"},lobType:{HOT:"HOTELS",CAR:"CARS",PKG:"PACKAGES",FLI:"FLIGHTS",RAI:"RAILS"},localeType:{ENU:"en_US",ESM:"es_MX"},regiontype:{SRS:"95",SRA:"127",SRH:"223",SRM:"351"},featuresType:{NON:"",HIE:"contextual_ta%7Cta_hierarchy%7Cpostal_code"},formatType:{XML:"xml",JSO:"json",JSP:"jsonp"}};jQuery.fn.autoCompleteBEXCities=function(e){function t(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function a(e){return t(e)==KeyCodes.Enter}var r=getAriaLogDiv();$(this).keypress(function(e){return!a(e)}),$(this).each(function(a){var i=$(this);if(i.is("input:text")){var n="div"+a+GetRandomId();$(i).bind("keyup",function(a){var o=1;if($(this).val().length>=o){var s=$(this).val(),l=t(a),d=$.inArray(l,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);d===-1&&i.getBEXLocations(s,n,r,e)}}),$(i).attr({autocomplete:"off",maxlength:100})}})},jQuery.fn.autoCompleteCities=function(e,t){function a(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function r(e){return a(e)==KeyCodes.Enter}var i=e,n=getAriaLogDiv();$(this).keypress(function(e){if(isImageRes){var t=$(this),o=$(this).val()+String.fromCharCode(a(e)),s=1;o.length>=s&&$.ajax({type:"POST",url:"//www.alaskaair.com/HomeWidget/GetCities",dataType:"json",data:{prefixText:o,contextKey:i()},complete:function(e){var a=$.parseJSON(e.responseText);try{as.dropDown&&as.dropDown.unbindDropdown(),as.dropDown=makeDropdown($(t),{formatText:!0,searchText:o,list:a,divId:"div0",acceptCharInput:!0,selectTextOnClick:!0,defaultHtml:"<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",$ariaLog:n,citycodeid:"checkinorigin"})}catch(r){}}})}return!r(e)}),$(this).each(function(e){var r=$(this);if(r.is("input:text")){var o="div"+e+GetRandomId();$(r).bind("keyup",function(e){var s=1;if($(this).val().length>=s){var l=$(this).val(),d=a(e),c=$.inArray(d,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);if(c===-1){var h="codeshare";null!=i&&(h="function"==typeof i?i():i),r.getCities(l,o,h,t,!1,n)}}}),$(r).attr({autocomplete:"off",maxlength:60})}})},jQuery.fn.autoCompleteCitiesLeftOnBoard=function(e,t){function a(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function r(e){return a(e)==KeyCodes.Enter}var i=getAriaLogDiv(),n=e;$(this).keypress(function(e){if(isImageRes){var t=$(this),o=$(this).val()+String.fromCharCode(a(e)),s=1;o.length>=s&&$.ajax({type:"POST",url:"//www.alaskaair.com/HomeWidget/GetCitiesLeftOnBoard",dataType:"json",data:{prefixText:o,contextKey:n()},complete:function(e){var a=$.parseJSON(e.responseText);try{as.dropDown&&as.dropDown.unbindDropdown(),as.dropDown=makeDropdown($(t),{formatText:!0,searchText:o,list:a,divId:"div0",acceptCharInput:!0,selectTextOnClick:!0,defaultHtml:"<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",citycodeid:"checkinorigin",$ariaLog:i})}catch(r){}}})}return!r(e)}),$(this).each(function(e){var r=$(this);if(r.is("input:text")){var o="div"+e+GetRandomId();$(r).bind("keyup",function(e){var s=1;if($(this).val().length>=s){var l=$(this).val(),d=a(e),c=$.inArray(d,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);if(c===-1){var h="codeshare";null!=n&&(h="function"==typeof n?n():n),r.getCitiesLeftOnBoard(l,o,h,t,i)}}}),$(r).attr({autocomplete:"off",maxlength:60})}})},jQuery.fn.getCitiesLeftOnBoard=function(e,t,a,r,i){var n=t,o=$(this),s=getAriaLogDiv();if(e===$(this).val()){var l="www.alaskaair.com";try{null!=asglobal&&null!=asglobal.domainUrl&&""!==asglobal.domainUrl?l=asglobal.domainUrl:null!=parent.asglobal&&null!=parent.asglobal.domainUrl&&""!==parent.asglobal.domainUrl&&(l=asglobal.domainUrl)}catch(d){}$.ajax({type:"POST",url:"//"+l+"/HomeWidget/GetCitiesLeftOnBoard",dataType:"json",data:{prefixText:e,contextKey:a},complete:function(l){var d=$.parseJSON(l.responseText);if(e===$(o).val()){var c="<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div>";null!=a&&"partner"===a.toLowerCase()?i&&d.length>0?(c="<div style='padding:8px;'>Select the Use Miles check box to search award destinations.</div>",d=[]):c+="</div>":c+="<div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",r&&0===d.length&&null!=a&&"partner"!==a.toLowerCase()?(a="partner",o.getCities(e,t,a,r,!0,s)):(as.dropDown&&as.dropDown.unbindDropdown(),as.dropDown=makeDropdown($(o),{formatText:!0,searchText:e,list:d,divId:n,acceptCharInput:!0,selectTextOnClick:!0,defaultHtml:c,citycodeid:"checkinorigin",$ariaLog:s}),d.length>0&&$(document.activeElement).attr("id")===o.attr("id")&&$("#"+n).show())}}})}return this},jQuery.fn.GetCitiesASQXNotAllAirports=function(e,t,a){var r=t,i=$(this),n=getAriaLogDiv();if(e==$(this).val()){var o="www.alaskaair.com";try{null!=asglobal&&null!=asglobal.domainUrl&&""!==asglobal.domainUrl?o=asglobal.domainUrl:null!=parent.asglobal&&null!=parent.asglobal.domainUrl&&""!==parent.asglobal.domainUrl&&(o=asglobal.domainUrl)}catch(s){}$.ajax({type:"POST",url:"//"+o+"/HomeWidget/GetCitiesASQXNotAllAirports",dataType:"json",data:{prefixText:e,contextKey:a},complete:function(t){var a=$.parseJSON(t.responseText);e==$(i).val()&&(as.dropDown&&as.dropDown.unbindDropdown(),as.dropDown=makeDropdown($(i),{formatText:!0,searchText:e,list:a,divId:r,acceptCharInput:!0,selectTextOnClick:!0,defaultHtml:"<div style='padding:8px;'>Enter the first 3 characters of:<div>&bull;&nbsp;&nbsp;City name</div><div>&bull;&nbsp;&nbsp;Airport name or code</div><div>&bull;&nbsp;&nbsp;U.S. state, province, or Mexico</div></div>",citycodeid:"checkinorigin",$ariaLog:n}),a.length>0&&$(document.activeElement).attr("id")==i.attr("id")&&$("#"+r).show())}})}return this},jQuery.fn.autoCompleteCitiesASQXNotAllAirports=function(e){var t=e;$(this).each(function(e){var a=$(this);if(a.is("input:text")){var r="div"+e+GetRandomId();$(a).bind("keyup",function(e){var i=1;if($(this).val().length>=i){var n=$(this).val(),o=e.keyCode?e.keyCode:e.which?e.which:e.charCode,s=$.inArray(o,[KeyCodes.DownArrow,KeyCodes.UpArrow,KeyCodes.Enter,KeyCodes.Tab,KeyCodes.End,KeyCodes.Home,KeyCodes.Shift]);if(s==-1){var l="none";null!=t&&(l="function"==typeof t?t():t),a.GetCitiesASQXNotAllAirports(n,r,l)}}}),$(a).attr({autocomplete:"off",maxlength:60})}})},tabpanel.prototype.init=function(){var e;this.$panels.attr("aria-hidden","true"),this.$panels.hide(),e=this.$tabs.filter(".selected"),0===e.length&&(e=this.$tabs.first(),e.addClass("selected")),e.click(),this.$panel.find(this.getPanelSelector(e)).show().attr("aria-hidden","false").addClass("active")},tabpanel.prototype.setSwitchTabCallback=function(e){this.switchTabCb=e},tabpanel.prototype.getPanelSelector=function(e){var t=e.find("a").attr("aria-controls");return t?"#"+t:""},tabpanel.prototype.switchTabs=function(e,t){$(".AsDD").hide();var a=function(e,t){t.find("a[aria-disabled]").length||(e.removeClass("selected focus active"),e.find("a").attr("tabindex","-1").attr("aria-selected","false"),t.addClass("selected").find("a").removeAttr("tabindex").attr("aria-selected","true").click(),this.accordian||(this.$panel.find(this.getPanelSelector(e)).hide().attr("aria-hidden","true").removeClass("active"),this.$panel.find(this.getPanelSelector(t)).show().attr("aria-hidden","false").addClass("active")),this.switchTabCb&&this.switchTabCb(this.$tabs.index(t)),t.addClass("active"),t.find("a").focus())},r=this;t.length>0&&t[0].loadTabContentCb?t[0].loadTabContentCb(a.bind(r,e,t)):a.call(r,e,t)},tabpanel.prototype.togglePanel=function(e){var t=this.$panel.find(this.getPanelSelector(e));"true"===t.attr("aria-hidden")?(t.slideDown(100),t.attr("aria-hidden","false").removeClass("active")):(t.slideUp(100),t.attr("aria-hidden","true").addClass("active"))},tabpanel.prototype.bindHandlers=function(){var e=this;this.$tabs.keydown(function(t){return e.handleTabKeyDown($(this),t)}),this.$tabs.keypress(function(t){return e.handleTabKeyPress($(this),t)}),this.$tabs.click(function(t){return e.handleTabClick($(this),t)}),this.$tabs.focus(function(t){return e.handleTabFocus($(this),t)}),this.$tabs.blur(function(t){return e.handleTabBlur($(this),t)}),this.$panels.keydown(function(t){return e.handlePanelKeyDown($(this),t)}),this.$panels.keypress(function(t){return e.handlePanelKeyPress($(this),t)})},tabpanel.prototype.handleTabKeyDown=function(e,t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.enter:case this.keys.space:return!this.accordian||(this.togglePanel(e),t.stopPropagation(),!1);case this.keys.left:case this.keys.up:var a;if(t.ctrlKey);else{var r=this.$tabs.index(e);a=0===r?this.$tabs.last():this.$tabs.eq(r-1),this.switchTabs(e,a)}return t.stopPropagation(),!1;case this.keys.right:case this.keys.down:return r=this.$tabs.index(e),a=r===this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(r+1),this.switchTabs(e,a),t.stopPropagation(),!1;case this.keys.home:return this.switchTabs(e,this.$tabs.first()),t.stopPropagation(),!1;case this.keys.end:return this.switchTabs(e,this.$tabs.last()),t.stopPropagation(),!1}},tabpanel.prototype.handleTabKeyPress=function(e,t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.enter:case this.keys.space:case this.keys.left:case this.keys.up:case this.keys.right:case this.keys.down:case this.keys.home:case this.keys.end:return t.stopPropagation(),!1;case this.keys.pageup:case this.keys.pagedown:return!t.ctrlKey||(t.stopPropagation(),!1)}return!0},tabpanel.prototype.handleTabClick=function(e,t){var a=this;$(".AsDD").hide();var r=function(e,t){e.$tabs.removeClass("selected active"),e.$tabs.find("a").attr("tabindex","-1").attr("aria-selected","false"),e.$panels.hide().removeClass("active"),t.addClass("selected active").find("a").attr("aria-selected","true").removeAttr("tabindex"),e.$panel.find(e.getPanelSelector(t)).show().addClass("active"),e.init_executed&&t.find("a").focus(),e.switchTabCb&&e.switchTabCb(e.$tabs.index(t)),e.init_executed=!0};return e.length>0&&e[0].loadTabContentCb?e[0].loadTabContentCb(r.bind(void 0,a,e)):r(a,e),!1},tabpanel.prototype.handleTabFocus=function(e,t){return e.addClass("focus"),!0},tabpanel.prototype.handleTabBlur=function(e,t){return e.removeClass("focus"),!0},tabpanel.prototype.handlePanelKeyDown=function(e,t){if(t.altKey)return!0;var a,r,i;switch(t.keyCode){case this.keys.esc:return t.stopPropagation(),!1;case this.keys.left:case this.keys.up:return!t.ctrlKey||(r=$("#"+e.attr("aria-labelledby")),r.focus(),t.stopPropagation(),!1);case this.keys.pageup:return!t.ctrlKey||(r=this.$tabs.filter(".selected"),i=this.$tabs.index(r),a=0===i?this.$tabs.last():this.$tabs.eq(i-1),this.switchTabs(r,a),t.stopPropagation(),t.preventDefault(),!1);case this.keys.pagedown:return!t.ctrlKey||(r=$("#"+e.attr("aria-labelledby")),i=this.$tabs.index(r),a=i===this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(i+1),this.switchTabs(r,a),t.stopPropagation(),t.preventDefault(),!1)}return!0},tabpanel.prototype.handlePanelKeyPress=function(e,t){return!!t.altKey||(!t.ctrlKey||t.keyCode!==this.keys.pageup&&t.keyCode!==this.keys.pagedown?t.keyCode!==this.keys.esc||(t.stopPropagation(),t.preventDefault(),!1):(t.stopPropagation(),t.preventDefault(),!1))},$.extend($.expr[":"],{focusable:function(e){var t=e.nodeName.toLowerCase(),a=$(e).attr("tabindex");return $(e)["area"===t?"parents":"closest"](":hidden").length!==!0&&(!(!isNaN(a)&&a<0)&&(/input|select|textarea|button|object/.test(t)===!0?!e.disabled:("a"===t||"area"===t)==!0&&e.href.length>0))}});var homepage=window.homepage||{};homepage.setupCityPreferences=function(e,t,a,r,i){for(var n=function(e,t,a,r){if(e){var i=document.createElement("a");i.innerHTML=e,i.href="#",i.setAttribute("aria-label","Press enter to set "+r+" city to "+e),i.onclick=function(){return a.value=this.innerHTML,a.focus(),!1},t.appendChild(i)}},o=a("REZQUERY2%2E0AS"),s=o.split("&"),l=!1,d=!1,c=0,h=s.length;c<h;c++)if(s[c].indexOf("=")!==-1){var u=s[c].split("=")[0];"O1"!==u&&"O2"!==u&&"O3"!==u||(n(s[c].split("=")[1],e,r,"From"),l=!0),"D1"!==u&&"D2"!==u&&"D3"!==u||(n(s[c].split("=")[1],t,i,"To"),d=!0)}var p=document.createElement("span");p.innerHTML="&nbsp;",!l&&d?e.appendChild(p):!d&&l&&t.appendChild(p)},window.Cookies||(window.Cookies={get:function(e){for(var t=e+"=",a=document.cookie.split(";"),r=0,i=a.length;r<i;r++){for(var n=a[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return""}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var a=t||0,r=this.length;a<r;a++)if(this[a]===e)return a;return-1}),$(window).bind("pageshow",function(){HideInterstitial()}),function(e){function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),a=t.exec(location.search.toLocaleLowerCase());return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function a(e,t){for(var a=e.split("&"),r=0;r<a.length;r++){var i=a[r].split("=");if(decodeURIComponent(i[0])===t)return decodeURIComponent(i[1])}return null}function r(e){var t=e.find("[name=ContractFareTypeKey]"),a=e.find("label.restrict-contract-fares span"),r=e.find(".discount-group"),i=e.find(".contract-fare-filters"),n=t.val();if(e.hasClass("ContractFares")&&"NONE"!==n){var o=e.find("[name=ContractFareTypeKey] :selected").text();a.html("Show only "+o),r.hide(),i.show()}else i.hide(),r.css("display","")}function i(e){var t=e.find("[name=IsAwardReservation]"),a=e.find("[name=AwardOption]");t.is(":checked")&&"MilesOnly"!==a.val()?e.addClass("AS50"):e.removeClass("AS50")}var n=function(t){var a=-1,r=this.find("input[type=radio][name=flightType]:checked");if(r.length>0)a=parseInt(r.val(),10);else{var i=this.find("input[type=checkbox][name=IsOneWay]"),n=this.find("[name=IsRoundTrip]");i.is(":checked")?(a=2,n.val("false")):(a=1,n.val("true")),this.find("[name=flightType]").val(a)}for(var o=["","IsRoundTrip","IsOneWay","IsMultiCity"],s=1;s<o.length;s+=1)this.removeClass(o[s]),this.find("[name="+o[s]+"]").val("false");this.addClass(o[a]),this.find("[name="+o[a]+"]").val("true");var l=null;l=3===a?[["Coach","Lowest coach"],["UNRESTRICTED","Refundable coach"],["First","Lowest first"],["First|UNRESTRICTED","Refundable first"]]:[["NoUpgradePreference","Upgrades"]],l.push(["MILEAGEUPG","Mileage upgrade"]),l.push(["MVPUPG","MVP&reg; upgrade"]),l.push(["GOLDUPG","MVP&reg; Gold upgrade"]),l.push(["GUESTUPG","MVP&reg; Gold guest upgrade"]);var d=this.find("[name=FareType]"),c="";e.each(l,function(e,t){c+='<option value="'+t[0]+'">'+t[1]+"</option>"}),d.html(e(c))},o=function(e){var t=this.find("[name=IsAwardReservation]"),a=t.is(":checked"),r="AwardTravel";a?this.addClass(r):this.removeClass(r)},s=function(t){function a(){for(var e=2;e<5;e+=1)t.find("[name=DepartureCity"+e+"]").val(""),t.find("[name=ArrivalCity"+e+"]").val(""),t.find("[name=DepartureDate"+e+"]").val(""),t.find("[name=DepartureTime"+e+"]").val("Anytime")}var r=t.find("[name=IsRoundTrip]"),i=t.find("[name=IsOneWay]"),n=t.find("[name=IsMultiCity]"),o=t.find("[name=IsAwardReservation]"),s=o.is(":checked"),l=t.find("[name=flightType]:checked"),d=parseInt(l.val(),10),c=e("[name=ShopLowFareCalendar]"),h=e("[name=IsShopLowFareCalendar]"),u=e("[name=ShopAwardCalendar]"),p=e("[name=IsShopAwardCalendar]");(s||n.is(":checked"))&&h.attr("checked",!1),c.val(h.is(":checked")?"true":"false"),s&&!n.is(":checked")||p.attr("checked",!1),u.val(p.is(":checked")?"true":"false"),s?(t.find("[name=ShopLowFareCalendar]").removeAttr("checked"),t.find("[name=DiscountCode]").val(""),3===d?t.find("[name=FareType]").val("Coach"):t.find("[name=FareType]").val("NoUpgradePreference")):(t.find("[name=ShopAwardCalendar]").removeAttr("checked"),t.find("[name=AwardOption]").val("MilesOnly")),1===d?(r.val("true"),i.val("false"),n.val("false"),a()):2===d?(r.val("false"),i.val("true"),n.val("false"),t.find("[name=ReturnDate]").val(""),t.find("[name=ReturnTime]").val("Anytime"),a()):3===d&&(r.val("false"),i.val("false"),n.val("true"),t.find("[name=ReturnDate]").val(""),t.find("[name=ReturnTime]").val("Anytime"),t.find("[name=FareType]").val("NoUpgradePreference"),t.find("[name=IncludeNearbyArrivalAirports]").removeAttr("checked"),t.find("[name=IncludeNearbyDepartureAirports]").removeAttr("checked"),t.find("[name=ShopLowFareCalendar]").removeAttr("checked"));var f=t.find("[name=ContractFareTypeKey]"),v=t.find("[name=ShowOnlyContractFares]"),m=t.find("[name=ShowContractAndAllFares]"),g=t.find("[name=ContractFaresOption]"),y=t.hasClass("ContractFares");if(y)if(s)f.val("NONE"),v.val("false"),m.val("false"),g.val("");else{var C=e("[name=FaresToShow]:checked").val(),b="ShowOnlyContractFares"===C;v.val(b),m.val(!b),g.val("on")}else f.val(""),v.val("false"),m.val("false"),g.val("");var $=t.find("[name=adultCount]");"0 Adults"!==$.val&&t.find("[name=RequiresUmnrService]").val("")},l=function(t,a){var r=e("#UMNRModal");r.removeClass("hidden");var i=parseInt(e("#adultCount").val()),n=parseInt(e("#childrenCount").val());if(0==i&&n>0){var o="#divChildrenQ";n>1?e(o).html("Are these children traveling alone?"):e(o).html("Is your child traveling alone?")}r.showLightBox({width:460,setParentZIndex:!1,parentElement:e("body")});var s=r.find(".continue-btn"),l=r.find("[name=umnrOption]"),d=r.find(".divUmnrNote");l.attr("checked",!1),d.addClass("hidden"),s.addClass("disabled"),l.bind("change",function(){"Yes"===r.find("[id=umnrYes]:checked").val()?(d.addClass("hidden"),e("#umnrNo").removeAttr("aria-describedby")):(d.removeClass("hidden"),e("#umnrNo").attr("aria-describedby","divUmnrNote")),s.removeClass("disabled"),s.attr("aria-disabled",!1)}),s.bind("click",function(){s.hasClass("disabled")||(e("input[name=RequiresUmnrService]").val(e("#umnrYes").get(0).checked?"True":"False"),e.hideLightBoxes(),a())})},d=function(e){for(var t=e.serialize().split("&"),a={},r=0;r<t.length;r+=1){var i=t[r].split("="),n=decodeURIComponent(i[1]);n=n.replace(/\+/g," "),"true"===n?n=!0:"false"===n&&(n=!1),a[i[0]]=n}return a},c=function(t){var a=d(t),r=(new Date).getTime();e.ajax({type:"POST",url:"//www.alaskaair.com/Shopping/Flights/ValidateShoppingRequest?t="+r,dataType:"json",data:a,complete:function(r,i){var n=r.responseText;if(null!=n&&""!=n){var o=e.parseJSON(r.responseText);if(null!=o)if(o.IsValidRequest){var s=t.find("[name=AdultCount]").val(),d=function(){
var e=homepage.sessionStorageManager.get("stateCode");if(!e){var t=homepage.cookieStore.getCookie("geo");if(t)return JSON.parse(t).StateCode}return e},c=function(){t.append('<input id="clientStateCode" type="hidden" name="ClientStateCode" value="'+d()+'" />'),ShowInterstitial(),window.isImageRes&&window.Cookies.set("res-load-pb","true"),f(a),t.addClass("isValid"),t.submit()};"0 adults"===s?l(t,c):c()}else{t.find("input, select").removeClass("input-error"),t.find("input, select").removeAttr("aria-invalid"),t.find("input, select").removeAttr("aria-describedby");for(var h=0;h<o.ErrorFields.length;h+=1)t.find("[name="+o.ErrorFields[h]+"]").addClass("input-error");for(var u=e("<ul></ul>"),p=[],h=0;h<o.ErrorMessages.length;h+=1){var v=e('<li id="shopping_err_'+h+'">'+o.ErrorMessages[h]+"</li>");u.append(v),p.push(v)}for(var h=0;h<o.ErrorFieldsWithErrorID.length;h+=1){var m=o.ErrorFieldsWithErrorID[h],g=m.substr(0,m.indexOf(":")),y=m[m.length-1],C=e("[name="+g+"]");C.attr("aria-describedby","shopping_err_"+y),C.attr("aria-invalid",!0)}o.ErrorFieldsWithErrorID.length>0&&e(".input-error").length>0&&e(".input-error")[0].focus(),t.find(".error-container").html(u),t.find("[type=submit]").removeAttr("disabled")}}}})},h=function(){var e=location.search,t=null;if(e&&e.length>1){"?"===e[0]&&(e=e.substr(1)),e=e.split("&"),t={};for(var a=0;a<e.length;a+=1){var r=e[a].split("=");t[r[0]]=decodeURIComponent(r[1]||"")}}return t},u=!1,p=function(t,a){t.find("[name=DepartureCity1]").val(a.O),t.find("[name=ArrivalCity1]").val(a.D),t.find("[name=DepartureDate1]").val(a.OD);var r="true"!==a.RT;r?(t.find("[name=flightType][value=2]").attr("checked",!0),t.find("#oneWay").prop("checked",!0)):t.find("[name=ReturnDate]").val(a.DD);for(var i=a.A,n=t.find("[name=AdultCount]"),o=n.find("option"),s=0;s<o.length;s+=1){var l=e(o[s]);if(l.val()[0]===i){n.val(l.val());break}}t.find("[name=ChildrenCount]").val(a.C),t.find("[name=InfantCount]").val(a.L);var c=a.ShoppingMethod,h=c&&"onlineaward"===c.toLowerCase();if(t.find("[name=IsAwardReservation]").attr("checked",h),t.find("[name=IncludeNearbyDepartureAirports]").attr("checked","true"===a.ONBA),t.find("[name=IncludeNearbyArrivalAirports]").attr("checked","true"===a.DNBA),t.find("[name=DiscountCode]").val(a.E),!u){var p=d(t);f(p),u=!0}"Calendar"===a.RequestType&&(h?t.find("[name=IsShopAwardCalendar]").attr("checked",!0):t.find("[name=IsShopLowFareCalendar]").attr("checked",!0))},f=function(e){try{localStorage.setItem("shoppingParams",JSON.stringify(e))}catch(t){window.console}},v=function(t){var a=h(),r=a&&a.O&&a.D&&a.OD;if(r)return void p(t,a);var i=localStorage.getItem("shoppingParams");if(i){if(window.isImageRes){var n=window.Cookies.get("res-load-pb");if("yes"!==n)return}var o=e.parseJSON(i);o.IsMultiCity===!0&&o.IsOneWay===!1&&o.IsRoundTrip===!1&&(o.IsRoundTrip=!0,o.IsMultiCity=!1);var s=new Date;for(var l in o){var d=o[l],c=t.find("[name="+l+"]"),u=(c.attr("type")||"").toLowerCase();if("string"==typeof d&&(d=d.replace("Adult","adult")),d&&d.indexOf&&d.indexOf("GOVTFARES")>=0)for(var f=d.substr(0,d.lastIndexOf("|")),v=c.find("option"),m=0;m<v.length;m++){var g=e(v[m]);if(g.attr("value").indexOf(f)>=0){c.val(g.val());break}}else if("checkbox"===u)c.attr("checked",d);else if("radio"===u)c=t.find("[name="+l+"][value="+d+"]"),c.attr("checked",!0);else{if(l.indexOf("Date")>=0&&d&&d.length>0){var y=/\d+\/\d+\/\d\d$/;y.exec(d)&&(d=d.substr(0,d.length-2)+"20"+d.substr(d.length-2));var C=new Date(d),b=C.getFullYear()-2e3;b>0&&(C<s&&(C=s),d=C.getMonth()+1+"/"+C.getDate()+"/"+b)}c.val(d)}}}};e.fn.restoreSearchFromUrl=p,e.fn.shoppingForm=function(){v(this);var l=this.find("[name=flightType], input[type=checkbox][name=IsOneWay]"),d=e.proxy(n,this);l.change(d),d();var h=this.find("[name=IsAwardReservation]"),u=e.proxy(o,this);h.change(u),u(),v(this);var p=this,f=function(e){return p.find("[type=submit]").attr("disabled","disabled"),p.hasClass("isValid")?void p.removeClass("isValid"):(s(p),c(p),e.preventDefault(),!1)};this.removeClass("isValid"),this.submit(f),this.find("[type=submit]").click(f),this.find("[name=DepartureCity1], [name=ArrivalCity1], [name=DepartureCity2], [name=ArrivalCity2], [name=DepartureCity3], [name=ArrivalCity3], [name=DepartureCity4], [name=ArrivalCity4]").click(function(t){e(t.target).select()}).autoCompleteCities(function(){var e=h.is(":checked");return e?"partner":"codeshare"},!0);var m=t("ecert")||t("discountcode")||this.attr("data-discount"),g=this.find("[name=DiscountCode]");m?g.val(m):"Discount code"===g.val()&&g.val(""),this.hasClass("TwoAdults")&&this.find("[name=AdultCount]").val("2 Adults");var y=this.find("[name=DepartureDate1]").val();if(!y){var C=new Date;y=C.getMonth()+1+"/"+C.getDate()+"/"+(C.getFullYear()-2e3)}var b=this.find("[name=ReturnDate]");b.val()||b.val(y);for(var $=1;$<5;$+=1){var w=this.find("[name=DepartureDate"+$+"]");w.val()||w.val(y)}var k=this.find("[name=ContractFareTypeKey]"),D=this.find(".discount-group");k.change(function(){r(p)});var S=function(){h.is(":checked")?D.css("display",""):r(p)};h.change(S),r(this),S(),e("[name=AwardOption]").change(function(){i(p)}),i(this);for(var x=[],T=[],A=window.Cookies.get("REZQUERY2%2E0AS"),I=1,E=a(A,"O"+I);E;)x.push(E),I+=1,E=a(A,"O"+I);for(var L=p.find(".from-group .preferredCities"),$=0;$<x.length;$+=1){var O=e("<a></a>").html(x[$]);O.click(function(t){p.find("[name=DepartureCity1]").val(e(t.srcElement).html())}),L.append(O)}I=1;for(var V=a(A,"D"+I);V||I<4;)V&&V.length>0&&T.push(V),I+=1,V=a(A,"D"+I);for(var N=p.find(".to-group .preferredCities"),$=0;$<T.length;$+=1){var O=e("<a></a>").html(T[$]);O.click(function(t){p.find("[name=ArrivalCity1]").val(e(t.srcElement).html())}),N.append(O)}var R=p.find(".link-to-advanced");return R.click(function(t){t.preventDefault();var a=p.find("[name=DepartureCity1]").val(),r=p.find("[name=ArrivalCity1]").val(),i=p.find("[name=DepartureDate1]").val(),n=p.find("[name=ReturnDate]").val(),o=p.find("[name=AdultCount]").val()[0],s=p.find("[name=ChildrenCount]").val();null!=s&&(s=s[0]);var l=p.find("[name=InfantCount]").val();null!=l&&(l=l[0]);var d=p.find("[name=IsOneWay]").is(":checked")?"false":"true",c=p.find("[name=IsAwardReservation]").is(":checked")?"OnlineAward":null,h=e(this).attr("href").indexOf("?")>0?"&":"?";return h+="O="+a+"&D="+r+"&OD="+i+"&DD="+n+"&OT=&DT=&A="+o+"&C="+s+"&L="+l+"&F=&RT="+d+"&RC=false",null!==c&&(h+="&RequestType="+c),window.location=e(this).attr("href")+h,!1}),this}}(jQuery),$("#advanced-search-form").length&&$("#advanced-search-form").shoppingForm(),$("#checkInDestination").length&&$("#checkInDestination").autoCompleteCitiesASQXNotAllAirports("codeshare",!0),$("#flightStatusForm #Origin").length&&$("#flightStatusForm #Origin").autoCompleteCitiesASQXNotAllAirports("codeshare",!0),$("#flightStatusForm #Destination").length&&$("#flightStatusForm #Destination").autoCompleteCitiesASQXNotAllAirports("codeshare",!0);var shoppingWidget={SelectCity:function(e){for(var t=$(e),a=t.parents(".DC_ThisCity").prev(),r=a.find(".DC_EnteredCity"),i=25;0===r.length&&i>0;)a=a.prev(),r=a.find(".DC_EnteredCity"),i-=1;var n=r.text();$("#advanced-search-form").find("input[type=text]").each(function(e,a){var r=$(a);r.val()===n&&r.val(t.text())})}},ChangeAvailSearch=function(){$("#advanced-search-form").toggleClass("expanded")},homepage=window.homepage||{};homepage.cookieStore=homepage.cookieStore||{getCookie:function(e){return""}},window.homepage.setupCityPreferences(document.getElementById("preferredOrigin"),document.getElementById("preferredDestinations"),homepage.cookieStore.getCookie,document.getElementById("fromCity1"),document.getElementById("toCity1"));var homepage=window.homepage||{};homepage.sessionStorageManager=homepage.sessionStorageManager||{get:function(e){return""},set:function(e,t){}},$(document).ready(function(){var e=(new tabpanel("formletTabPanel","#primaryTab [role=presentation]","#booking, #checkin, #status, #manage",(!1)),"neat");$("#formletTabPanel #findFlights").click(function(){$(".AsDD").hide(),$("#advanced-search-form").find("input[type=text]").attr("aria-describedby",null)}),"undefined"!=typeof as&&as.IsBexDown===!1&&(e="bex"),$("#tab-hotels").parent().length>0&&($("#tab-hotels").parent().get(0).loadTabContentCb=function(t){(new HotelsHomeletLoader).load(t,"//"+asglobal.domainUrl+"/"+e+"/hotelformlet/"+as.Version)}),$("#tab-cars").parent().length>0&&($("#tab-cars").parent().get(0).loadTabContentCb=function(t){(new CarsHomeletLoader).load(t,"//"+asglobal.domainUrl+"/"+e+"/carformlet/"+as.Version)}),$("#tab-vacations").parent().length>0&&($("#tab-vacations").parent().get(0).loadTabContentCb=function(t){(new VacationsHomeletLoader).load(t,"//"+asglobal.domainUrl+"/"+e+"/vacationformlet/"+as.Version)});new tabpanel("booking","#secondaryTab [role=presentation]","#flights, #hotels, #cars, #vacations",(!1))});var inputErrorCSS="input-error",today=new Date,yesterday=new Date(today);yesterday.setDate(today.getDate()-1);var tomorrow=new Date(today);tomorrow.setDate(today.getDate()+1);var getFormattedDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},yesterdayDate=getFormattedDate(yesterday),todayDate=getFormattedDate(today),tomorrowDate=getFormattedDate(tomorrow),homeletValidators={};homeletValidators.isValueEqualsPlaceholder=function(e){return e.val()===e.attr("placeholder")},homeletValidators.setValidationError=function(e,t,a){if(a&&"undefined"!=typeof a&&null!==a){var r=$("."+t,a).eq(0);r.show(),r.attr("id",t)}else $("#"+t).show();e.attr("aria-describedby",t),e.attr("aria-invalid",!0),e.addClass(inputErrorCSS)},homeletValidators.removeValidationError=function(e,t,a){if(a&&"undefined"!=typeof a&&null!==a){var r=$("."+t,a).eq(0);r.hide(),r.attr("id","")}else $("#"+t).hide();e.removeAttr("aria-describedby"),e.removeAttr("aria-invalid"),e.removeClass(t)},function(e){e.fn.checkinForm=function(){var t=this,a=["","","confirmcode-option","eticket-option","mp-option"],r=["","","checkInConfirmationCode","checkInETicketNumber","checkInMileagePlanNumber"],i=[null,null,/^[A-Za-z]{6}$/,/^[0-9]{10}$|^[0-9]{13}$/,/^[0-9]{1,12}$/],n=this.find("form");n.attr("action",serviceEndpoints.kineticsWebCheckInURL);var o=function(e){for(var r=parseInt(s.val()||"0",10),i=0;i<a.length;i+=1)t.removeClass(a[i]);t.addClass(a[r])},s=e("#checkinOption");return s.keyup(o),s.change(o),this.submit(function(n){var o=[];e(this).find("."+inputErrorCSS).removeClass(inputErrorCSS);for(var l,d=parseInt(s.val()||"0",10),c=2;c<a.length;c+=1)e("#checkin-error-"+c).hide(),c!==d?t.find("input."+a[c]).val(""):l=t.find("input."+a[c]).val();var h=e("#checkInDestination");if(h.val().length<3||homeletValidators.isValueEqualsPlaceholder(h))n.preventDefault(),homeletValidators.setValidationError(h,"checkin-error-departure"),o.push(h),homeletValidators.removeValidationError(h,"checkin-error-departure-notsupported");else if(h.val().indexOf("(HAV-Havana)")>0){var u=e("#checkin-heading");u.hide(),n.preventDefault(),homeletValidators.removeValidationError(h,"checkin-error-departure"),homeletValidators.setValidationError(h,"checkin-error-departure-notsupported"),o.push(h)}else{var p=h.data("city-code");p||(p=h.val().toUpperCase()),e("#checkinorigin").val(p),homeletValidators.removeValidationError(h,"checkin-error-departure"),homeletValidators.removeValidationError(h,"checkin-error-departure-notsupported")}return""===a[d]?(n.preventDefault(),homeletValidators.setValidationError(s,"checkin-error-option"),o.push(s)):(homeletValidators.removeValidationError(s,"checkin-error-option"),i[d].test(l)?homeletValidators.removeValidationError(e("#"+r[d]),"checkin-error-"+d):(n.preventDefault(),homeletValidators.setValidationError(e("#"+r[d]),"checkin-error-"+d),o.push(e("#"+r[d])))),o.length>0&&o[0].focus(),0===o.length}),this},e.fn.flightStatusForm=function(){for(var t=this,a=[yesterdayDate,todayDate,tomorrowDate],r=1,i=this.find("[name=FlightDate]"),n=0;n<a.length;n+=1)e(e("#flightStatusDepart").children()[n]).val(a[n]);i.val(a[r]),this.find("[name=DepartureDate]").val(todayDate);var o=e("[name=FlightNumber]");return this.submit(function(a){var r=[],i=o.val().trim();if(o.val(i),""===i||isNaN(i)){e(this).find("."+inputErrorCSS).removeClass(inputErrorCSS);var n=e("#Origin"),s=n.val().trim(),l=e("#Destination"),d=l.val().trim();s.length<3&&d.length<3?(homeletValidators.setValidationError(o,"flightStatus-error-either"),r.push(o)):homeletValidators.removeValidationError(o,"flightStatus-error-either"),s.length<3||homeletValidators.isValueEqualsPlaceholder(n)?(homeletValidators.setValidationError(n,"flightStatus-error-from"),r.push(n)):homeletValidators.removeValidationError(n,"flightStatus-error-from"),d.length<3||homeletValidators.isValueEqualsPlaceholder(l)?(homeletValidators.setValidationError(l,"flightStatus-error-to"),r.push(l)):homeletValidators.removeValidationError(l,"flightStatus-error-to"),""!==s&&s===d?(homeletValidators.setValidationError(l,"flightStatus-error-sameFromTo"),r.push(l)):(""!==s&&homeletValidators.removeValidationError(n,"flightStatus-error-sameFromTo"),""!==d&&homeletValidators.removeValidationError(l,"flightStatus-error-sameFromTo"));var c=new Date(e("#DepartureDate").val().trim());"Invalid Date"!=c&&c.getFullYear()<1970&&c.setFullYear(c.getFullYear()+100),"Invalid Date"==c||c<today.setHours(0,0,0,0)?(homeletValidators.setValidationError(e("#DepartureDate"),"flightStatus-error-departureDate"),r.push(e("#DepartureDate"))):homeletValidators.removeValidationError(e("#DepartureDate"),"flightStatus-error-departureDate")}else t.find("[name=DepartureDate]").attr("name","old1"),t.find("[name=Origin]").attr("name","old2"),t.find("[name=Destination]").attr("name","old3");if(0===r.length&&""===i){var h=t.attr("action");h=h.replace("/flightstatus/","/schedule/"),t.attr("action",h)}return r.length>0&&r[0].focus(),0===r.length}),this},e.fn.manageForm=function(t){return this.submit(function(a){var r=[];t.find("."+inputErrorCSS).removeClass(inputErrorCSS);var i=e("input[name*='TravelerLastName']",t);i.val().trim().length<1||homeletValidators.isValueEqualsPlaceholder(i)?(homeletValidators.setValidationError(i,"manage-error-tlastname",t),r.push(i)):homeletValidators.removeValidationError(i,"manage-error-tlastname",t);var n=e("input[name*='CodeOrNumber']",t),o=n.val().trim();n.val(o);var s=[/^[A-Za-z]{6}$|^[0-9]{10}$|^[0-9]{13}$/];return s[0].test(o)?homeletValidators.removeValidationError(n,"manage-error-confirmationcode",t):(homeletValidators.setValidationError(n,"manage-error-confirmationcode",t),r.push(n)),0===r.length?ShowInterstitial():r[0].focus(),0===r.length}),t};var t=e("#manage"),a=t.find("form"),r=e(a[0]);r.manageForm(r)}(jQuery),$("#checkin").checkinForm(),$("#flightStatusForm").flightStatusForm(),function(e){e("body").delegate(".transition-slide-up","click",function(t){var a=e(t.target);return!(!a.is("a")||!a.hasClass("alert-link"))||(t.preventDefault(),e(this).slideUp(),!1)})}(jQuery);